{"version":3,"sources":["../src/index.js","demo.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["Importabular","x","y","options","maxWidth","maxHeight","data","node","LooseArray","onChange","onSelectionChange","contentStyle","cellStyle","minHeight","Infinity","minWidth","borderSpacing","background","border","e","editing","preventDefault","rows","parsePasteEvent","selection","rx","ry","offset","forEach","row","val","setVal","changeSelectedCellsStyle","selectionStart","selectionEnd","length","onDataChanged","asArr","getSelectionAsArray","clipboardData","setData","arrToHTML","map","join","copy","setAllSelectedCellsTo","ctrlKey","key","revertEdit","stopEditing","moveCursor","shiftKey","startEditing","getCell","firstChild","value","tbody","style","userSelect","getCoords","selecting","endSelection","lastMouseUp","Date","now","lastMouseUpTarget","td","input","removeEventListener","blurIfEnter","removeChild","renderTDContent","code","keyCode","status","getStatus","cell","Object","assign","TDStyle","div","tagName","innerText","getVal","restyle","parent","setupDom","replaceDataWithArray","incrementToFit","toArr","clear","width","height","refreshDisplayedValue","document","createElement","setAttribute","toString","innerHTML","appendChild","table","tableStyle","tr","addCell","addEventListener","mousedown","mouseenter","mouseup","mouseleave","keydown","paste","cut","Array","prototype","call","children","fitBounds","incrementWidth","incrementHeight","result","push","destroyEditing","parentElement","forSelectionCoord","curr","nc","getBoundingClientRect","editingSize","type","focus","callback","oldS","getSelectionCoords","reverse","cb","selected","onlySelected","editTarget","padding","borderStyle","borderWidth","borderColor","cleanStyle","arguments","lineHeight","fontFamily","fontSize","color","boxSizing","target","getAttribute","parseInt","line","selectedCount","hash","cleanedVal","cleanVal","isEmpty","Math","max","obj","keys","arr","outerHTML","event","html","window","getData","iframe","body","contentWindow","open","write","close","trs","querySelectorAll","tds","text","ensureDimensions","fromText","split","s","getElementById","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","i","module"],"mappings":"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","file":"demo.d3b53871.js","sourceRoot":"../demo","sourcesContent":["\n\n\nexport default class Importabular{\n  parent=null\n  width=1\n  height=1\n  data=new LooseArray()\n  options={\n    onChange:null,\n    onSelectionChange:null,\n    contentStyle:()=>null,\n    cellStyle:()=>null,\n    minHeight:1,\n    maxHeight:Infinity,\n    minWidth:1,\n    maxWidth:Infinity,\n  }\n  fitBounds({x,y}){\n    return x>=0 && x<this.options.maxWidth\n    && y>=0 && y<this.options.maxHeight\n  }\n  constructor({data=[],node, ...options}) {\n    this.parent=node\n    Object.assign(this.options, options)\n    this.setupDom()\n    this.replaceDataWithArray(data)\n    this.incrementToFit({x:this.options.minWidth-1, y:this.options.minHeight-1})\n  }\n  onDataChanged(){\n    if(this.options.onChange){\n      this.options.onChange(this.data.toArr())\n    }\n  }\n  setData(data){\n    this.data.clear()\n    data.forEach((row,y)=>\n      row.forEach((val,x)=>\n        this.setVal(x,y,val)\n      ))\n    for(let x=0;x<this.width;x++)\n      for(let y=0;y<this.height;y++)\n        this.refreshDisplayedValue({x,y})\n\n  }\n  renderTDContent(td, x,y){\n    const div=document.createElement('div')\n    td.setAttribute('x',x.toString())\n    td.setAttribute('y',y.toString())\n    const val=this.getVal( x,y)\n    if(val){\n      div.innerText=val;\n    }else{\n      // Force no collapse of cell\n      div.innerHTML='&nbsp;'\n    }\n    td.appendChild(div)\n    this.restyle({x,y})\n\n  }\n  tableStyle={\n    borderSpacing:0,\n    background:'white',\n    border:'1px solid #ddd'\n\n  }\n  setupDom(){\n    const table=document.createElement('table')\n    const tbody=document.createElement('tbody')\n    Object.assign(table.style,this.tableStyle)\n\n\n    table.appendChild(tbody)\n    this.parent.appendChild(table)\n    this.tbody=tbody\n    this.table=table\n\n    for(let y=0;y<this.height;y++){\n      const tr=document.createElement('tr')\n      tbody.appendChild(tr)\n      for(let x=0;x<this.width;x++){\n        this.addCell(tr,x,y)\n      }\n    }\n\n    tbody.addEventListener('mousedown', this.mousedown, true)\n    tbody.addEventListener('mouseenter', this.mouseenter, true)\n    tbody.addEventListener('mouseup', this.mouseup, true)\n    tbody.addEventListener('mouseleave', this.mouseleave)\n    document.addEventListener('keydown', this.keydown, true)\n    document.addEventListener('paste', this.paste)\n    document.addEventListener('cut', this.cut)\n    document.addEventListener('copy', this.copy)\n  }\n\n  addCell(tr, x,y){\n    const td=document.createElement('td')\n    tr.appendChild(td)\n    this.renderTDContent(td,x,y)\n  }\n\n  incrementHeight(){\n\n    this.height++\n    const y=this.height-1\n    const tr=document.createElement('tr')\n\n    this.tbody.appendChild(tr)\n    for(let x=0;x<this.width;x++){\n      this.addCell(tr, x,y)\n    }\n  }\n\n  incrementWidth(){\n\n    this.width++\n    const x=this.width-1\n    Array.prototype.forEach.call(this.tbody.children, (tr,y)=>{\n      this.addCell(tr, x,y)\n    })\n  }\n  incrementToFit({x,y}){\n    if(!this.fitBounds({x,y})) return\n    while(x>this.width-1) this.incrementWidth()\n    while(y>this.height-1) this.incrementHeight()\n  }\n  paste=e=>{\n    if(this.editing) return\n    e.preventDefault();\n    const rows=parsePasteEvent(e)\n    const {rx,ry}= this.selection\n    const offset={x:rx[0], y:ry[0]}\n\n    rows.forEach((row, y)=>{\n      row.forEach((val, x)=>{\n        this.setVal(offset.x+x, offset.y+y, val)\n      })\n    })\n\n    this.changeSelectedCellsStyle(()=>{\n      this.selectionStart=offset\n      this.selectionEnd ={\n        x:offset.x+rows[0].length-1,\n        y:offset.y+rows.length-1\n      }\n    })\n    this.onDataChanged()\n  }\n  getSelectionAsArray(){\n    const {rx,ry}=this.selection\n    if(rx[0]===rx[1]) return null\n    const width=rx[1]-rx[0]\n    const height=ry[1]-ry[0]\n    const result=[]\n    for(let y=0;y<height;y++){\n      result.push([])\n      for(let x=0;x<width;x++){\n        result[y].push(this.getVal(rx[0]+x, ry[0]+y))\n      }\n    }\n    return result\n  }\n  copy=e=>{\n    const asArr=this.getSelectionAsArray()\n    if(asArr){\n      e.preventDefault()\n      e.clipboardData.setData('text/html', arrToHTML(asArr));\n      e.clipboardData.setData('text/plain', asArr.map(row=>row.join('\\t')).join('\\n'));\n    }\n  }\n\n  cut=e=>{\n    this.copy(e)\n    this.setAllSelectedCellsTo('')\n  }\n  destroy(){\n    this.destroyEditing()\n\n    // Remove global listeners\n    const tbody=this.tbody\n    tbody.removeEventListener('mousedown', this.mousedown, true)\n    tbody.removeEventListener('mouseenter', this.mouseenter, true)\n    tbody.removeEventListener('mouseup', this.mouseup, true)\n    tbody.removeEventListener('mouseleave', this.mouseleave)\n    document.removeEventListener('keydown', this.keydown, true)\n    document.removeEventListener('copy', this.copy)\n    document.removeEventListener('cut', this.cut)\n    document.removeEventListener('paste', this.paste)\n\n    this.table.parentElement.removeChild(this.table)\n  }\n\n  keydown=e=>{\n\n    if(e.ctrlKey) return\n\n    if(this.selectionStart){\n      if(e.key==='Escape' && this.editing){\n        e.preventDefault()\n        this.revertEdit()\n        this.stopEditing()\n      }\n      if(e.key==='Enter'){\n        e.preventDefault()\n        this.moveCursor({y:1})\n      }\n\n      if(e.key==='Tab'){\n        e.preventDefault()\n        this.moveCursor({x:e.shiftKey?-1:1})\n      }\n      if(!this.editing){\n\n        if(e.key==='Delete' || e.key==='Backspace'){\n          e.preventDefault()\n          this.setAllSelectedCellsTo('')\n        }\n        if(e.key==='ArrowDown'){\n          e.preventDefault()\n          this.moveCursor({y:1})\n        }\n\n        if(e.key==='ArrowUp'){\n          e.preventDefault()\n          this.moveCursor({y:-1})\n        }\n        if(e.key==='ArrowLeft'){\n          e.preventDefault()\n          this.moveCursor({x:-1})\n        }\n        if(e.key==='ArrowRight'){\n          e.preventDefault()\n          this.moveCursor({x:+1})\n        }\n      }\n\n\n      if(e.key.length === 1 && !this.editing){\n        this.changeSelectedCellsStyle(()=>{\n          const {x,y}=this.selectionStart\n          // We clear the value of the cell, and the keyup event will\n          // happen with the cursor inside the cell and type the character there\n          this.startEditing({x,y})\n          this.getCell(x,y).firstChild.value=''\n        })\n      }\n    }\n  }\n  setAllSelectedCellsTo(value){\n    this.forSelectionCoord(this.selection,({x,y})=>this.setVal(x,y,value))\n    this.forSelectionCoord(this.selection,this.refreshDisplayedValue)\n\n    this.onDataChanged()\n  }\n  moveCursor({x=0,y=0}){\n\n    const curr=this.selectionStart\n    const nc = {x:curr.x+x, y:curr.y+y}\n\n    if(!this.fitBounds(nc)) return\n\n    this.stopEditing()\n\n\n    this.incrementToFit(nc)\n    // if(nc.x>=this.width) return;\n    // if(nc.y>=this.height) return;\n    this.changeSelectedCellsStyle(()=>{\n      this.selectionStart=this.selectionEnd =nc\n    })\n  }\n  selecting=false;\n  selectionStart=null\n  selectionEnd=null\n  selection={rx:[0,0],ry:[0,0]}\n  editing=null\n\n  mousedown=e=>{\n    this.changeSelectedCellsStyle(()=>{\n      this.tbody.style.userSelect='none'\n      this.selectionStart=this.getCoords(e);\n      this.selectionEnd=this.selectionStart\n      this.selecting=true;\n    })\n  }\n  mouseenter=e=>{\n    if(this.selecting){\n      this.changeSelectedCellsStyle(()=>{\n        this.selectionEnd=this.getCoords(e);\n      })\n    }\n  }\n\n  lastMouseUp=null\n  lastMouseUpTarget=null\n  endSelection(){\n    this.selecting=false;\n    this.tbody.style.userSelect=''\n  }\n  mouseup=e=>{\n    if(this.selecting){\n      this.changeSelectedCellsStyle(()=>{\n        this.selectionEnd=this.getCoords(e);\n        this.endSelection()\n\n        if(this.lastMouseUp &&\n          this.lastMouseUp>Date.now()-300 &&\n          this.lastMouseUpTarget.x===this.selectionEnd.x &&\n          this.lastMouseUpTarget.y===this.selectionEnd.y\n        ){\n          this.startEditing(this.selectionEnd)\n        }\n        this.lastMouseUp=Date.now()\n        this.lastMouseUpTarget=this.selectionEnd\n      })\n    }\n  }\n  mouseleave=e=>{\n    if(this.selecting){\n      this.endSelection()\n    }\n  }\n  startEditing({x,y}){\n\n    this.editing={x,y}\n    const td=this.getCell(x,y)\n    const {width,height}=td.firstChild.getBoundingClientRect()\n    this.editingSize={width,height}\n    td.removeChild(td.firstChild)\n    const input=document.createElement('input');\n    input.type='text'\n    input.value=this.getVal(x,y)\n    td.appendChild(input)\n    input.focus()\n    input.addEventListener('blur', this.stopEditing)\n    input.addEventListener('keydown', this.blurIfEnter)\n  }\n\n  destroyEditing(){\n    if(this.editing){\n      const {x,y}=this.editing\n      const input=this.getCell(x,y).firstChild\n      input.removeEventListener('blur', this.stopEditing)\n      input.removeEventListener('keydown', this.blurIfEnter)\n    }\n  }\n  revertEdit(){\n    if(!this.editing) return\n    const {x,y}=this.editing\n    const td=this.getCell(x,y)\n    const input = td.firstChild\n    input.value=this.getVal(x,y)\n  }\n  stopEditing=()=>{\n    if(!this.editing) return\n    const {x,y}=this.editing\n    const td=this.getCell(x,y)\n    const input = td.firstChild\n    input.removeEventListener('blur', this.stopEditing)\n    input.removeEventListener('keydown', this.blurIfEnter)\n    this.setVal(x,y,input.value)\n    td.removeChild(input)\n    this.editing=null\n    this.renderTDContent(td, x,y)\n    this.onDataChanged()\n  }\n  blurIfEnter=e=>{\n    const code=e.keyCode\n    if(code===13){\n      // enter\n      this.stopEditing()\n      e.preventDefault()\n    }\n  }\n  changeSelectedCellsStyle(callback){\n    const oldS=this.selection\n    callback()\n    this.selection=this.getSelectionCoords()\n    this.forSelectionCoord(oldS,this.restyle)\n    this.forSelectionCoord(this.selection,this.restyle)\n    if(this.options.onSelectionChange){\n      this.options.onSelectionChange(this.selection)\n    }\n  }\n  getSelectionCoords(){\n    if(!this.selectionStart) return {rx:[0,0], ry:[0,0]}\n    let rx=[this.selectionStart.x,this.selectionEnd.x]\n    if(rx[0]>rx[1]) rx.reverse()\n    let ry=[this.selectionStart.y,this.selectionEnd.y]\n    if(ry[0]>ry[1]) ry.reverse()\n    return {rx:[rx[0],rx[1]+1],ry:[ry[0],ry[1]+1]}\n  }\n  forSelectionCoord({rx,ry}, cb){\n    for(let x=rx[0];x<rx[1];x++)\n      for(let y=ry[0];y<ry[1];y++)\n        if(this.fitBounds({x,y}))\n          cb({x,y})\n  }\n  restyle=({x,y})=>{\n\n    const status =this.getStatus(x,y)\n    const cell=this.getCell(x,y)\n\n    Object.assign(cell.style, this.TDStyle(x,y,status))\n    Object.assign(cell.firstChild.style, this.contentStyle(x,y,status))\n  }\n\n  TDStyle(x,y,{selected,onlySelected, editTarget,editing}){\n\n    return {\n      padding:0,\n      background:selected && !editing && !onlySelected?'#d7f2f9':'',\n      borderStyle:'solid',\n      borderWidth:'1px',\n      borderColor:editTarget && !editing ? 'black' : (\n        [y ? '#ddd':'transparent','transparent','transparent',\n          x ? '#ddd':'transparent'].join(' ')\n      ),\n      ...cleanStyle(this.options.cellStyle(...arguments))\n    }\n  }\n  contentStyle(x,y,{selected,onlySelected, editTarget,editing}){\n    return {\n      border:'none',\n      padding:'0 10px',\n      minWidth:'100px',\n      minHeight:'40px',\n      lineHeight:'40px',\n      width:editing?this.editingSize.width+'px':'',\n      height:editing?this.editingSize.height+'px':'',\n      fontFamily:'inherit',\n      fontSize:'inherit',\n      color:'inherit',\n      boxSizing:'border-box',\n      ...cleanStyle(this.options.contentStyle(...arguments))\n    }\n  }\n\n\n  refreshDisplayedValue=({x,y})=>{\n    const div=this.getCell(x,y).firstChild\n    if(div.tagName==='DIV'){\n      div.innerText=this.getVal(x,y)\n    }\n    this.restyle({x,y})\n  }\n\n\n  getCoords(e){\n    // Returns the clicked cell coords or null\n    let node=e.target;\n    while (!node.getAttribute('x') && node.parentElement && node.parentElement!==this.parent){\n      node=node.parentElement\n    }\n    return {\n      x:parseInt(node.getAttribute('x')) || 0,\n      y:parseInt(node.getAttribute('y')) || 0,\n    }\n  }\n\n\n  replaceDataWithArray(data) {\n\n    data.forEach((line, y)=>{\n      line.forEach((val, x)=>{\n        this.setVal( x,y, val)\n      })\n    })\n\n    this.onDataChanged()\n  }\n  setVal( x,y,val){\n\n    if(!this.fitBounds({x,y})) return\n\n    this.data.setVal( x,y, val)\n    this.incrementToFit({x:x+1,y:y+1})\n    this.refreshDisplayedValue({x,y})\n  }\n\n  getVal(x,y) {\n    return this.data.getVal(x,y)\n  }\n  getStatus(x,y){\n    const {rx,ry} = this.selection\n    const selected = x>=rx[0] && x<rx[1] && y>=ry[0] && y<ry[1]\n    const editTarget = x===rx[0] && y===ry[0] && rx[0]!==rx[1]\n    const editing= this.editing && x===this.editing.x &&  y===this.editing.y\n    const selectedCount = (rx[1]-rx[0])*(ry[1]-ry[0])\n    return {selected,editTarget,editing, onlySelected:selected && selectedCount<2}\n  }\n  getCell(x,y){\n    return this.tbody.children[y].children[x]\n  }\n\n}\n\nclass LooseArray{\n  // An 2D array of strings that only stores non \"\" values\n  data={}\n  setVal( x,y,val){\n    const hash=this.data\n    const cleanedVal=LooseArray.cleanVal(val)\n    if(cleanedVal){\n      if(!hash[x])hash[x]={}\n      hash[x][y] = cleanedVal\n    }else{\n      // delete item\n      if(hash[x] && hash[x][y]){\n        delete hash[x][y]\n        if(LooseArray.isEmpty(hash[x]))\n          delete hash[x]\n      }\n    }\n  }\n  clear(){\n    this.data={}\n  }\n  getVal(x,y) {\n    const hash=this.data\n    return hash && hash[x] && hash[x][y] || ''\n  }\n  static cleanVal(val){\n    if(val === 0) return '0'\n    if(!val) return ''\n    return val.toString()\n  }\n  static isEmpty(obj) {\n    return Object.keys(obj).length === 0\n  }\n  toArr(){\n    let width=1, height=1;\n    for(let x in this.data){\n      for(let y in this.data[x]){\n        height=Math.max(height, parseInt(y)+1)\n        width=Math.max(width, parseInt(x)+1)\n      }\n    }\n    const result=[];\n    for(let y = 0; y<height;y++){\n      result.push([])\n      for(let x = 0; x<width; x++){\n        result[y].push(this.getVal(x,y))\n      }\n    }\n    return result\n  }\n\n}\n\n\n\nfunction arrToHTML(arr) {\n  const table=document.createElement('table')\n  arr.forEach(row=>{\n    const tr=document.createElement('tr')\n    table.appendChild(tr)\n    row.forEach(cell=>{\n      const td=document.createElement('td')\n      tr.appendChild(td)\n      td.innerText=cell\n    })\n  })\n  return table.outerHTML\n}\nfunction parsePasteEvent(event) {\n  try{\n\n    const html = (event.clipboardData || window.clipboardData).getData('text/html')\n\n    const iframe = document.createElement('iframe');\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.open();\n    iframe.contentWindow.document.write(html);\n    iframe.contentWindow.document.close();\n\n    const trs=iframe.contentWindow.document.querySelectorAll('tr')\n    const data=[];\n    Array.prototype.forEach.call(trs, (tr, y)=>{\n      const tds=tr.querySelectorAll('td')\n      Array.prototype.forEach.call(tds, (td, x)=>{\n        const text=td.innerText;\n        if(!data[y]) data[y]=[]\n        data[y][x]=text\n      })\n    })\n\n    document.body.removeChild(iframe);\n    if(data.length) return ensureDimensions(data)\n\n  }catch (e) {\n  }\n\n\n  const fromText= (event.clipboardData || window.clipboardData).getData('text')\n    .split(/\\r\\n|\\n|\\r/).map(row => row.split('\\t'))\n  return ensureDimensions(fromText)\n}\n\nfunction ensureDimensions(rows) {\n  if(!rows || !rows.length || !rows[0].length) return []\n  const width=rows[0].length\n  const height=rows.length\n  const result = []\n  for(var y=0;y<height;y++){\n    result.push([])\n    for(var x=0;x<width;x++){\n      const val = rows[y][x] || ''\n      result[y].push(val)\n    }\n  }\n  return result\n}\n\nfunction cleanStyle(s) {\n  if(!s) return {}\n  Object.keys(s).forEach(key => !s[key] && s[key]!==0 && delete s[key]);\n  return s\n}","\nimport Importabular from '../src'\nimport './demo.css'\nnew Importabular({\n  data:[\n    ['Product ID','Product name', 'Price','Unit','Category'],\n    ['256','Sample product', '2.5','Piece','Stuffs'],\n    ['122','Pre mix drink', '5','Bottle','Drinks'],\n  ],\n  node:document.getElementById('editorNode'),\n  maxWidth:5,\n  minHeight:8\n})","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}